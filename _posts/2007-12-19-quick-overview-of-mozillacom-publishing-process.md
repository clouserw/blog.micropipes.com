---
layout: post
title: Quick overview of mozilla.com publishing process
tags:
- Mozilla
---
<p><small>(apologies in advance to anyone without an <abbr title="Lightweight Directory Access Protocol">LDAP</abbr> account.  A lot of the links here point to content behind authentication.  If you're really curious about what's going on back there, you're welcome to check out <a href="http://svn.mozilla.org/projects/kubla/">the Kubla source</a>.)</small></p>
<p>Over the past couple of days I've felt a growing confusion about how the web infrastructure works on <a href="http://www.mozilla.com/">www.mozilla.com</a>.  People are beginning to use <a href="http://wiki.mozilla.org/Kubla">Kubla</a> (it's started with a small set and is steadily growing), and they're asking some good questions that hopefully I can help answer here:</p>
<p>Firstly, I think everyone with access has already seen this diagram, but bear with me:</p>
<p><img src="/blog/public/img/mozilla_three_tier_publishing_process.png" alt="Mozilla.com Three Tier Publishing Process" /></p>
<p>Fresh changes are committed to the first (top) tier - also referred to as "trunk".  If you're <a href="http://wiki.mozilla.org/Kubla:Documentation/Editing_Pages">making the change yourself</a> you're actually affecting this tier.  You can preview any of the changes from the first tier on <a href="https://www-trunk.stage.mozilla.com">www-trunk.stage.mozilla.com</a>.</p>
<p>The second tier (also known as "stage" or "staging") is where changes are previewed before they are pushed live.  When something is <a href="http://wiki.mozilla.org/Kubla:Documentation/Merging_Pages">pushed from trunk to stage</a> it will be on this second tier and viewable at <a href="https://www.stage.mozilla.com">www.stage.mozilla.com</a>.  To get to this tier, a change needs to be approved by a human (a publisher in Kubla).  If you have access and you want to see the differences between trunk and staging, look at the <a href="https://kubla.mozilla.com/queue/stage">staging queue</a>.</p>
<p>The final tier is our live site (or "production").  Anything pushed on to this tier will be on <a href="http://www.mozilla.com/">www.mozilla.com</a> within an hour, automatically.  To get to this tier, a change needs to be approved by <a href="https://intranet.mozilla.org/Mozilla_com_approvals">an admin in Kubla</a>.  The differences between the staging site and the live site can be seen in the <a href="https://kubla.mozilla.com/queue/prod">production queue</a>.</p>
<p>One of the main things to remember is that changes are not instantaneous.  Moving a change from trunk to stage and stage to production both require human interaction.  The staging site and the production site are updated periodically (Kubla shows an estimated time to next update on the left hand menu when you log in).  For production particularly, this is definitely an estimate.  The updates still need to rsync to our servers and then the aggressive caching in front of them needs to expire.  Generally that's an additional 15 minutes.</p>
<p>For changes that need to go out together or at a specific time we can speed up some of this process, but it becomes less automatic the faster we want it to go.  For most updates the automatic systems should work fine.  As always, I'm happy to answer questions if you have them, either about this process or Kubla itself.</p>
